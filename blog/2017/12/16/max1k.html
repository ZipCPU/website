<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Arrow's Max-1000: A gem for all the wrong reasons</title>
  <meta name="description" content="I’ll have to admit, I can be jealous of theCPUworld.  When I consider the fact that I can purchase aTeensy LC board with anARM Cortex-M0+processor running at...">

  <link rel="shortcut icon" type="image/x-icon" href="/img/GT.ico">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://zipcpu.com/blog/2017/12/16/max1k.html">
  <link rel="alternate" type="application/rss+xml" title="The ZipCPU by Gisselquist Technology" href="https://zipcpu.com/feed.xml">
</head>


  <body>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-102570964-1', 'auto');
  ga('send', 'pageview');

</script>

    <header class="site-header">
  <div id="banner">
  <a href="/"><picture>
    <img height=120 id="site-logo" src="/img/fullgqtech.png" alt="Gisselquist Technology, LLC">
  </picture></A>
  </div>

  <div class="site-nav">
<ul>

<li><a HREF="/">Main/Blog</a>


<li><a HREF="/about/">About Us</a>


<li><a HREF="/fpga-hell.html">FPGA Hell</a>


<li><a HREF="/tutorial/">Tutorial</a>
<li><a HREF="/tutorial/formal.html">Formal training</a>


<li><a HREF="/quiz/quizzes.html">Quizzes</a>


<li><a HREF="/projects.html">Projects</a>


<li><a HREF="/topics.html">Site Index</a>

<HR>

<li><a href="https://twitter.com/zipcpu"><span class="icon--twitter"><svg viewBox="0 0 400 400"><path fill="#1da1f2" d="M153.62,301.59c94.34,0,145.94-78.16,145.94-145.94,0-2.22,0-4.43-.15-6.63A104.36,104.36,0,0,0,325,122.47a102.38,102.38,0,0,1-29.46,8.07,51.47,51.47,0,0,0,22.55-28.37,102.79,102.79,0,0,1-32.57,12.45,51.34,51.34,0,0,0-87.41,46.78A145.62,145.62,0,0,1,92.4,107.81a51.33,51.33,0,0,0,15.88,68.47A50.91,50.91,0,0,1,85,169.86c0,.21,0,.43,0,.65a51.31,51.31,0,0,0,41.15,50.28,51.21,51.21,0,0,1-23.16.88,51.35,51.35,0,0,0,47.92,35.62,102.92,102.92,0,0,1-63.7,22A104.41,104.41,0,0,1,75,278.55a145.21,145.21,0,0,0,78.62,23"/></svg>
</span><span class="username">@zipcpu</span></a>

<li><a href="https://www.reddit.com/r/ZipCPU"><span class="username">Reddit</a>
<li><a HREF="https://www.patreon.com/ZipCPU"><IMG SRC="/img/patreon_logomark_color_on_white.png" WIDTH="25"> Support</a>
</ul>
</div>


</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="https://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Arrow's Max-1000: A gem for all the wrong reasons</h1>
    <p class="post-meta"><time datetime="2017-12-16T00:00:00-05:00" itemprop="datePublished">Dec 16, 2017</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>I’ll have to admit, I can be jealous of the
<a href="https://en.wikipedia.org/wiki/Central_processing_unit">CPU</a>
world.  When I consider the fact that I can purchase a
<a href="https://www.pjrc.com/store/teensylc.html">Teensy LC</a> board with an
<a href="https://en.wikipedia.org/wiki/ARM_architecture">ARM Cortex-M0+</a>
processor running at 48MHz, 62K of flash and 8K of RAM for
<a href="https://www.pjrc.com/store/teensylc.html">for only $12</a>
from my <a href="http://www.microcenter.com/product/449970/Teensy_LC_-_Low_Cost">local hardware convenience
store</a>,
it makes me wonder at times why I am working in an
<a href="https://en.wikipedia.org/wiki/Field-programmable_gate_array">FPGA</a>
world where the cheapest
<a href="https://en.wikipedia.org/wiki/Field-programmable_gate_array">FPGA</a>
designs sell for <a href="http://store.digilentinc.com/cmod-a7-breadboardable-artix-7-fpga-module/">around
$75</a>
or so.  Ok, so the <a href="https://hackaday.io/project/12930-blackice-low-cost-open-hardware-fpga-dev-board">Black ICE</a>
board is a touch cheaper at $50, but this is still a far cry from the
<a href="https://www.pjrc.com/store/teensylc.html">$12 Teensy</a>.</p>

<table align="center" style="float: right"><caption>Fig 1. The Max 1000</caption><tr><td><img src="/img/max1k/max1k-picture.png" alt="" width="320" /></td></tr></table>
<p>Well, now there’s a new player in the ultra low-cost market.  You can now
purchase an <a href="https://www.arrow.com/en/products/max1000/arrow-development-tools">Arrow FPGA IoT Maker Board, the
MAX1000</a>
for just $30.</p>

<p>As I was recently asked to do some work with the
<a href="https://www.arrow.com/en/products/max1000/arrow-development-tools">MAX1000</a>,
I thought I might share some of my first experiences and impressions with you
here.</p>

<p>Before I get started though, you should know that I am not getting paid by
either <a href="https://www.arrow.com">Arrow</a> or
<a href="https://www.trenz-electronic.de">Trenz</a> to write this review.
Neither am I getting paid by <a href="https://www.digilentinc.com">Digilent</a> for that
matter.  Rather, I’ve been asked to demonstrate that
<a href="http://www.clifford.at/yosys">yosys</a> can be used to build a design on an
<a href="https://www.altera.com">Intel (Altera)</a> platform—something I’m still
working on.</p>

<h2 id="the-good">The Good</h2>

<p>If you are looking for a low-priced
<a href="https://en.wikipedia.org/wiki/Field-programmable_gate_array">FPGA</a>
board to get started with, the
<a href="https://www.arrow.com/en/products/max1000/arrow-development-tools">MAX1000</a>
<em>should</em> fit the bill nicely.  Indeed, it has just about all of the basic
components within it that you should need to do
<a href="https://en.wikipedia.org/wiki/Field-programmable_gate_array">FPGA</a> work.</p>

<table align="center" style="float: right"><caption>Fig 2. Max 1000 peripherals</caption><tr><td><img src="/img/max1k/max-1000.svg" alt="" width="480" /></td></tr></table>

<p>It has an
<a href="https://www.winbond.com/resource-files/w74m64fv%20revb.pdf">8MB flash</a>
and, unlike the <a href="https://store.digilentinc.com/cmod-s6-breadboardable-spartan-6-fpga-module">CMod
S6</a>
I worked with before, the
<a href="https://www.arrow.com/en/products/max1000/arrow-development-tools">MAX1000</a>
actually has some decent RAM to work with – an
<a href="https://www.winbond.com/resource-files/w9864g6jt_a03_20170331.pdf">8MB SDRAM</a>.
These two items are the basics you will need for any
<a href="https://en.wikipedia.org/wiki/Soft_microprocessor">soft CPU</a>
work you wish to do.  Of course, you’ll also need an LED or two, and the
<a href="https://www.arrow.com/en/products/max1000/arrow-development-tools">MAX1000</a>
has a nice complement of eight of them.  The
<a href="http://www.st.com/content/ccc/resource/technical/document/datasheet/3c/ae/50/85/d6/b1/46/fe/CD00274221.pdf/files/CD00274221.pdf/jcr:content/translations/en.CD00274221.pdf">motion sensor</a>
on top is also fun bonus not normally found on most
<a href="https://en.wikipedia.org/wiki/Field-programmable_gate_array">FPGA</a>
boards.  Further, the
<a href="http://www.st.com/content/ccc/resource/technical/document/datasheet/3c/ae/50/85/d6/b1/46/fe/CD00274221.pdf/files/CD00274221.pdf/jcr:content/translations/en.CD00274221.pdf">motion sensor</a>
also contains an
<a href="http://www.st.com/content/ccc/resource/technical/document/datasheet/3c/ae/50/85/d6/b1/46/fe/CD00274221.pdf/files/CD00274221.pdf/jcr:content/translations/en.CD00274221.pdf">accelerometer</a>
capability, so a fun project might be to create an electronic level.
Even better, the
<a href="http://www.st.com/content/ccc/resource/technical/document/datasheet/3c/ae/50/85/d6/b1/46/fe/CD00274221.pdf/files/CD00274221.pdf/jcr:content/translations/en.CD00274221.pdf">auxilliary A/D</a>
that comes as a part of this
<a href="http://www.st.com/content/ccc/resource/technical/document/datasheet/3c/ae/50/85/d6/b1/46/fe/CD00274221.pdf/files/CD00274221.pdf/jcr:content/translations/en.CD00274221.pdf">MEMS motion sensor</a>
 chip will spare a lot of designers the need to integrate their own
digitizer onto board.</p>

<p>While I’m not too excited about the 12MHz oscillator, an on-board PLL
turns this nicely into a 100MHz clock for whatever your application might
require.</p>

<p>You can even connect your own power supply to the board through its through-hole
connectors, in case you wish to run from something other than USB.</p>

<p>Nice, huh?</p>

<p>So what’s missing?  Your application.  That’s why I said this has <em>just about</em>
all of the basic components you will need.  However, it has a nice host
of GPIO through-holes, and even a place where you might solder in a PMod or
perhaps just a PMod header.</p>

<p>What makes this even nicer?  The price is <em>only</em> $30.  This will make the board
a nice entry board for hobbyists who aren’t sure they want to do more, and
for classroom instructors who need to purchase a large number of boards to
teach with.  (You may need to teach soldering at the same time, since the board
has only through hole connectors, however.)</p>

<p>The final item that I like about the board is the form factor.  I don’t know,
maybe it’s just me, but I tend to like <em>really small</em>
<a href="https://en.wikipedia.org/wiki/Field-programmable_gate_array">FPGA</a>
boards.  Perhaps
its because they are easier to integrate into other applications.  Perhaps
it is some other reason.  Either way, I love the form factor.  Even if you
don’t like small thin boards like I do, though, you will like the fact that
there are very few bulky components to get caught on things and ripped off of
the board.</p>

<p>Indeed, this board has the makings of being a very nice entry level
<a href="https://en.wikipedia.org/wiki/Field-programmable_gate_array">FPGA</a> board.
No, you aren’t going to learn how to process video with this board.  However,
the possibilities of what you might do with the board remain limited more
by your imagination and the size of the MAX-10
<a href="https://en.wikipedia.org/wiki/Field-programmable_gate_array">FPGA</a>
than anything else.  What would you like to do with it?</p>

<table align="center" style="float: right"><caption>Fig 3. The ZipCPU</caption><tr><td><img src="/img/zipcpu.png" alt="The ZipCPU's pipelined architecture" width="320" /></td></tr></table>

<p>Personally? I might like to place a
<a href="/about/zipcpu.html">ZipCPU</a>
onto this board.  I think I already have just about every thing I need for that.
I’ve got a full featured <a href="https://opencores.org/project,qspiflash">QSPI flash
controller</a>, and even an <a href="https://github.com/ZipCPU/xulalx25soc/blob/master/rtl/wbsdram.v">SDRAM
controller</a>
from <a href="https://github.com/ZipCPU/xulalx25soc/blob/master/rtl/wbsdram.v">another
project</a>.  I
should be good to go, right?</p>

<h2 id="the-bad">The Bad</h2>

<p>While I love the
<a href="https://www.arrow.com/en/products/max1000/arrow-development-tools">MAX1000</a>’s
design and the opportunities built into the circuit board,
and while the sales sheet looks beautiful, building with
this board has already taken more work than I had expected.  The primary
difficulty I’ve had so far, other than the <em>Ugly</em> section below, has been
finding the documentation.</p>

<p>The first part of working with any circuit board is always finding the
documentation.  This means finding a board’s
<a href="https://www.trenz-electronic.de/fileadmin/docs/Trenz_Electronic/TEI0001/REV02/Documents/SCH-TEI0001-02-08-C8.PDF">schematic</a>,
its <a href="https://www.trenz-electronic.de/fileadmin/docs/Trenz_Electronic/TEI0001/User_Guide/MAX1000%20User%20Guide.pdf">User Guide</a>,
and any data sheets for the parts on the board.
In this regard, I may be spoiled by
<a href="https://www.digilentinc.com">Digilent</a>–their documentation is always found
from a link on the sales page, and it is usually quite complete.
For the
<a href="https://www.arrow.com/en/products/max1000/arrow-development-tools">MAX1000</a>,
however, I had to struggle for quite some time to find its documentation.
I couldn’t find it linked anywhere from <a href="https://www.arrow.com/en/products/max1000/arrow-development-tools">Arrow’s sales
page</a>,
nor was their <a href="https://www.arrow.com/en/products/max1000/arrow-development-tools">sales documentation</a>
anything I could build with.  To make matters worse, searching
<a href="https://www.arrow.com/en/products/max1000/arrow-development-tools">Arrow’s</a>
data sheets was quite fruitless–and yet they are selling this board.</p>

<p>To spare you the trouble, I’ll post the links I finally found below.
(Thank you <a href="https://google.com">Google</a>.) The support for the
<a href="https://www.arrow.com/en/products/max1000/arrow-development-tools">MAX1000</a>
comes from
<a href="https://forum.trenz-electronic.de/">Trenz Electronic</a>, who has built both a
<a href="https://shop.trenz-electronic.de/en/path?=Trenz_Electronic/TE10001">wiki</a>
page for the board, as well as hosting a
<a href="https://forum.trenz-electronic.de/">forum</a> for any problems you might have.
Indeed, you can find these links from <a href="https://shop.trenz-electronic.de/en/TEI0001-02-08-C8-MAX1000-IoT-Maker-Board">Trenz’s sales
page</a>
for the
<a href="https://www.arrow.com/en/products/max1000/arrow-development-tools">MAX1000</a>.
(Well done <a href="https://shop.trenz-electronic.de">Trenz</a>!)</p>

<p>Hence, with a little work I was able to find the
<a href="https://www.trenz-electronic.de/fileadmin/docs/Trenz_Electronic/TEI0001/REV02/Documents/SCH-TEI0001-02-08-C8.PDF">schematic</a>
and even a <a href="https://www.trenz-electronic.de/fileadmin/docs/Trenz_Electronic/TEI0001/User_Guide/MAX1000%20User%20Guide.pdf">User Guide</a>.  From the
<a href="https://www.trenz-electronic.de/fileadmin/docs/Trenz_Electronic/TEI0001/REV02/Documents/SCH-TEI0001-02-08-C8.PDF">schematic</a>
I could google the data sheet for any part on the board.  Indeed, you’ll
find many of the links within this article point to the data sheets that
I was able to find.</p>

<p>The <a href="https://shop.trenz-electronic.de/en/path?=Trenz_Electronic/TE10001">wiki</a>
also offered several example designs that I might use.  However, as I looked
through each of them, none of them had any HDL code–whether Verilog or VHDL.</p>

<p>Worse, although the
<a href="https://www.trenz-electronic.de/fileadmin/docs/Trenz_Electronic/TEI0001/REV02/Documents/SCH-TEI0001-02-08-C8.PDF">schematic</a>
described what pins were connected to which part, and even described which
pins were available for external connections, it offered nothing to tell me
which pins corresponded to which GPIO’s.</p>

<p>For example, consider what the
<a href="https://www.trenz-electronic.de/fileadmin/docs/Trenz_Electronic/TEI0001/REV02/Documents/SCH-TEI0001-02-08-C8.PDF">schematic</a>
has to say about the GPIO’s on the
left and right sides of the board, shown in Fig 4.</p>

<table align="center" style="float: none"><caption>Fig 4. GPIO's</caption><tr><td><img src="/img/max1k/max1k-schematic-gpio.png" alt="GPIO picture from the Schematic" width="615" /></td></tr></table>

<p>Now, looking at that figure, can you tell me which pins will be which?  Are the
pins on “top” the ones closest to the USB connector on the board?  Are both
rows organized in the same fashion?  It doesn’t say.  This means that I will
need to spend time probing and reverse engineering just to orient the
<a href="https://www.trenz-electronic.de/fileadmin/docs/Trenz_Electronic/TEI0001/REV02/Documents/SCH-TEI0001-02-08-C8.PDF">schematic</a>
to the board.</p>

<p>The problem isn’t limited to the two rows of GPIO pins.  The
<a href="https://www.trenz-electronic.de/fileadmin/docs/Trenz_Electronic/TEI0001/REV02/Documents/SCH-TEI0001-02-08-C8.PDF">schematic</a>
also has the same problem when describing the PMod port.</p>

<table align="center" style="float: none"><caption>Fig 5. GPIO's</caption><tr><td><img src="/img/max1k/max1k-schematic-pmod.png" alt="PMod picture from the Schematic" width="450" /></td></tr></table>

<p>In both examples, the schematic
makes it clear that the pins are available for use, but still leaves a lot
for granted in how these pins are mapped to the actual device.  For example,
is pin 1 closer to the USB port, or is pin 5?  Which side are the 3.3V and
ground pins on, left or right?  And which way constitutes “left” or “right”?</p>

<p>Perhaps I’m spoiled.  I was considering connecting the
<a href="https://www.arrow.com/en/products/max1000/arrow-development-tools">MAX1000</a>
to a <a href="http://www.microcenter.com/product/449970/Teensy_LC_-_Low_Cost">Teensy
LC</a>,
and looking at the <a href="https://www.pjrc.com/teenhttps://www.pjrc.com/teensy/teensylc_front_pinout.pngsy/teensyLC.html">Teensy
LC’s</a>
<a href="https://www.pjrc.com/teensy/teensylc_front_pinout.png">I/O diagrams</a> it was
easy to correlate their physical I/O pins to both their I/O pin numbers and
their associated functionality.</p>

<p>Unfortunately, the
<a href="https://www.arrow.com/en/products/max1000/arrow-development-tools">MAX1000</a>
doesn’t have a simple picture showing how the pins are connected.</p>

<p>While such a diagram should be easy enough to create, I couldn’t find
anything mapping pins to I/O’s on the board.  The closest I could find were
the (in order) pin numbers on the
<a href="https://www.trenz-electronic.de/fileadmin/docs/Trenz_Electronic/TEI0001/REV02/Documents/SCH-TEI0001-02-08-C8.PDF">schematic</a>
for each of the headers.  However, this wasn’t enough for me to determine
header orientation, etc.</p>

<p>So while I like the hardware design and build, I’d strike a mark from the board
for its (currently) poor documentation set.</p>

<h2 id="the-ugly">The ugly</h2>

<p>Okay, now for the really ugly part: I bought my
<a href="https://www.arrow.com/en/products/max1000/arrow-development-tools">MAX1000</a>
only to discover on the
<a href="https://shop.trenz-electronic.de/en/path?=Trenz_Electronic/TE10001">wiki</a>
that they hadn’t finished building their Linux driver yet, so they hadn’t
yet posted it for download.</p>

<p>Please, guys, can’t you hold off selling an item until the driver’s needed to
support it are built and tested?</p>

<p>A month later, now, they finally have a
<a href="https://shop.trenz-electronic.de/en/Download/?path=Trenz_Electronic/TEI0001/Driver/Arrow_USB_Blaster">Linux driver posted</a>.</p>

<p>The problem is … it doesn’t work.</p>

<p>Sure, they have directions for installing their driver, directions which
clearly tell you how to set it up.  These directions have two problems.</p>

<ol>
  <li>
    <p>First, they tell me that I need to disable (blacklist) the linux
<code class="language-plaintext highlighter-rouge">ftdi_sio</code> kernel module.  This is the very same kernel module that I am
using quite successfully and extensively with my other
<a href="https://en.wikipedia.org/wiki/Field-programmable_gate_array">FPGA</a>
projects.  Blacklisting this kernel module will likely impact my other work
in a negative fashion.</p>
  </li>
  <li>
    <p>If this wasn’t unworkable enough on its own, the second problem is that even
after following their instructions I still couldn’t get Quartus’s JTAG
loader to acknowledge that my hardware even existed.
(See section 6.1.4 of the <a href="https://www.trenz-electronic.de/fileadmin/docs/Trenz_Electronic/TEI0001/User_Guide/MAX1000%20User%20Guide.pdf">User Guide</a>
to know where this first failed for me.)</p>

    <p>To make matters worse, neither the <a href="https://www.trenz-electronic.de/fileadmin/docs/Trenz_Electronic/TEI0001/User_Guide/MAX1000%20User%20Guide.pdf">User
Guide</a>
nor the <a href="https://shop.trenz-electronic.de/en/Download/?path=Trenz_Electronic/TEI0001/Driver/Arrow_USB_Blaster">Linux driver installation
instructions</a>
offer any help in troubleshooting any potential problems.</p>
  </li>
</ol>

<p>My best guess is that there’s something missing in their instructions that
they’ve overlooked, but I’m not sure what it might be.  Perhaps they sold
the device with the wrong
<a href="http://www.st.com/resource/en/datasheet/CD00001142.pdf">EEPROM</a>
settings for the “USB blaster” (i.e. the
<a href="http://www.ftdichip.com/Support/Documents/DataSheets/ICs/DS_FT2232H.pdf">FT2232</a>).</p>

<h2 id="the-redeeming">The Redeeming</h2>

<p>Here’s the really neat and redeeming part to this whole story: while the
<a href="https://shop.trenz-electronic.de/en/Download/?path=Trenz_Electronic/TEI0001/Driver/Arrow_USB_Blaster">Trenz driver</a>
doesn’t work (yet), I can still configure my
<a href="https://www.arrow.com/en/products/max1000/arrow-development-tools">MAX1000</a>
just fine using the open source <a href="http://www.clifford.at/libxsvf">libxvsf</a>
driver.  No, it’s not point-and-click.  No, I haven’t (yet)
tried it with more than one device on my system–I need to experiment
with that still.  However, I didn’t need to blacklist my working
<a href="https://en.wikipedia.org/wiki/Field-programmable_gate_array">FPGA</a>
serial port driver to use it.</p>

<p>To use this tool, you’ll want to download
<a href="http://www.clifford.at/libxsvf">libxvsf</a>
and build it.  I know there’s got to be an easier way to clone an svn
repository, but I ended up just copying the files in the repository one by
one to my computer.  I then built the package using <code class="language-plaintext highlighter-rouge">make all</code>.  In hindsight,
this is a bit of overkill since i only needed the <code class="language-plaintext highlighter-rouge">xsvftool-ft232h</code> program.
You will need to have the <a href="https://www.intra2net.com/en/developer/libftdi/">open source FTDI
library</a>
and <code class="language-plaintext highlighter-rouge">pthreads</code> installed on your system.</p>

<p>I was a little concerned about whether this would work with the device I was
using or not, so I then proceeded slowly for the next several steps—just
to make sure I knew what I was doing (and so I didn’t destroy any of my
hardware).</p>

<p>Hence the first thing I did was to unplug all of my other USB controlled
<a href="https://en.wikipedia.org/wiki/Field-programmable_gate_array">FPGA</a>
devices.  This probably isn’t technically required, but it does limit the
number of things can go wrong.</p>

<p>I then issued a command to check the JTAG chain.  I did this to get some
assurance that the tool worked as advertised.  Since I already knew that my
<a href="https://www.arrow.com/en/products/max1000/arrow-development-tools">MAX1000</a>
had a USB ID of <code class="language-plaintext highlighter-rouge">0403:6010</code>, this command was:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">xsvftool-ft232h -D i:0x403:0x6010 -C A -c</code></pre></figure>

<p>The result was a rather cryptic error that <code class="language-plaintext highlighter-rouge">xsvftool-ft2232h</code> couldn’t open my
device.  Hence, I quickly peppered the <code class="language-plaintext highlighter-rouge">xsvftool-ft2232h.c</code> code with
<a href="http://www.cplusplus.com/reference/cstdio/perror">perror()</a>
statements anytime an O/S call might fail.  (Don’t you just love
open source?)  As a result, I learned that I didn’t have the permission
to execute this command.</p>

<p>Next, I tried:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">sudo xsvftool-ft232h -D i:0x403:0x6010 -C A -c</code></pre></figure>

<p>and this seemed to work.  The result was the simple line,</p>

<p><code class="language-plaintext highlighter-rouge">idcode=0x031820dd, revision=0x0, part=0x3182, manufactor=0x06e</code></p>

<p>After looking up the manufacturer’s ID code, I confirmed that <code class="language-plaintext highlighter-rouge">6e</code> is indeed
the manufacturer code for
<a href="https://www.altera.com">Altera</a>.  Further, <a href="https://www.altera.com">Altera</a>’s
JTAG documentation identifies that the <code class="language-plaintext highlighter-rouge">0x031820dd</code> device is indeed the MAX-10
<a href="https://en.wikipedia.org/wiki/Field-programmable_gate_array">FPGA</a>
I am working with.</p>

<p>Ok, so now I know I’m talking to the right chip.</p>

<p>I then tried reading the
<a href="http://www.ftdichip.com/Support/Documents/DataSheets/ICs/DS_FT2232H.pdf">FT2232</a>’s
<a href="http://www.st.com/resource/en/datasheet/CD00001142.pdf">EEPROM</a>
from the device.</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">sudo xsvftool-ft232h -D i:0x403:0x6010 -C A -R ftdi.eeprom</code></pre></figure>

<p>The result was an error that the
<a href="http://www.st.com/resource/en/datasheet/CD00001142.pdf">EEPROM</a>
<a href="https://en.wikipedia.org/wiki/Cyclic_redundancy_check">CRC</a>
didn’t match.  (I may have to look into that some more.)  However, the
command also produced a file that, when dumped in hex, looked like:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">0000000 01 08 03 04 10 60 00 07 80 fa 08 00 41 44 9a 0c
0000020 a6 24 ca 12 00 00 00 00 66 00 00 00 00 00 00 00
0000040 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
*
0000200</code></pre></figure>

<p>The third through sixth bytes of this file, <code class="language-plaintext highlighter-rouge">03 04 10 60</code>, caught my
attention.  Knowing that
<a href="http://www.ftdichip.com/Support/Documents/DataSheets/ICs/DS_FT2232H.pdf">FT2232</a>
chips keep their USB identifiers in their
<a href="http://www.st.com/resource/en/datasheet/CD00001142.pdf">EEPROM</a>
memory, I immediately recognized these bytes as the
USB ID of <code class="language-plaintext highlighter-rouge">0403:6010</code>–exactly what I expected from <code class="language-plaintext highlighter-rouge">lsusb</code>, the udev
configuration file I was told to install, and more.</p>

<p>The next task was to load my
<a href="https://www.arrow.com/en/products/max1000/arrow-development-tools">MAX1000</a>
with my just-built configuration.  For this, I opened up the “Program Device”
dialog, and clicked on “Create JAM, JBC, SVF or ISC File…” from the file
menu.</p>

<table align="center" style="float: none"><caption>Fig 6. Quartus Programming Tool Dialog's File Menu Option</caption><tr><td><img src="/img/max1k/quartus-pgm-file-menu.png" alt="Creating an SVF file in Quartus" width="320" /></td></tr></table>

<p>From here, I could save my design in the
<a href="https://en.wikipedia.org/wiki/Serial_Vector_Format">Serial Vector Format (SVF)</a>
<a href="http://www.clifford.at/libxsvf">libxvsf</a>
required.</p>

<table align="center" style="float: none"><caption>Fig 7. Max 1000 peripherals</caption><tr><td><img src="/img/max1k/quartus-svf-dialog.png" alt="Creating an SVF file in Quartus" width="320" /></td></tr></table>

<p>I then ran,</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">sudo xsvftool-ft232h  -D i:0x403:0x6010 -C A -s quartus/toplevel.svf</code></pre></figure>

<p>and <em>my design loaded and worked</em>!!</p>

<p>But perhaps I haven’t made clear the significance of this.</p>

<p>One common question on the
<a href="https://www.digilentinc.com">Digilent</a>
<a href="https://forum.digilentinc.com">forum</a>
is how to do things with the <a href="http://www.ftdichip.com/Support/Documents/DataSheets/ICs/DS_FT2232H.pdf">FT2232H FTDI
chip</a>
on <a href="https://www.digilentinc.com">their</a>
<a href="https://en.wikipedia.org/wiki/Field-programmable_gate_array">FPGA</a> boards.
<a href="https://www.digilentinc.com">Digilent</a>’s
answer has always been that the circuitry and configurations associated with the
<a href="http://www.ftdichip.com/Support/Documents/DataSheets/ICs/DS_FT2232H.pdf">FT2232</a>
JTAG loader is a proprietary part of the board.
For those who “accidentally” erase the firmware on their board, the issue
is taken off forum and the poster is quietly given instructions (and software)
to reload the firmware (i.e. the
<a href="http://www.ftdichip.com/Support/Documents/DataSheets/ICs/DS_FT2232H.pdf">FT2232</a>’s
<a href="http://www.st.com/resource/en/datasheet/CD00001142.pdf">EEPROM</a>).</p>

<p>However, using <a href="http://www.clifford.at/libxsvf">libxvsf</a>,
you can both read the firmware before playing with it, and you can
(or at least should be able to) reconfigure it yourself.  Want to see what
the <a href="https://www.digilentinc.com">Digilent</a>
<a href="https://store.digilentinc.com/arty-artix-7-fpga-development-board-for-makers-and-hobbyists/">Arty</a>
<a href="http://www.ftdichip.com/Support/Documents/DataSheets/ICs/DS_FT2232H.pdf">FT2232H</a>
configuration looks like?</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">0000000 01 08 03 04 10 60 00 07 80 fa 08 00 00 00 9a 12
0000020 ac 28 d4 1a 00 00 00 00 56 00 01 00 c7 92 6a 35
0000040 51 01 00 02 41 72 74 79 00 00 00 00 00 00 00 00
0000060 00 00 00 00 00 44 69 67 69 6c 65 6e 74 20 41 72
0000100 74 79 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0000120 00 00 01 00 00 00 00 00 00 00 00 00 00 00 00 00
0000140 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
*
0000200</code></pre></figure>

<p>If you do an <code class="language-plaintext highlighter-rouge">od -c</code> instead of an <code class="language-plaintext highlighter-rouge">od -t x1</code> on the
<a href="https://store.digilentinc.com/arty-artix-7-fpga-development-board-for-makers-and-hobbyists/">Arty</a>’s configuration file,
you get the following:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">0000000 001  \b 003 004 020 140  \0  \a 200 372  \b  \0  \0  \0 232 022
0000020 254   ( 324 032  \0  \0  \0  \0   V  \0 001  \0 307 222   j   5
0000040   Q 001  \0 002   A   r   t   y  \0  \0  \0  \0  \0  \0  \0  \0
0000060  \0  \0  \0  \0  \0   D   i   g   i   l   e   n   t       A   r
0000100   t   y  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0
0000120  \0  \0 001  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0
0000140  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0
*
0000200</code></pre></figure>

<p>So, if I want to try my own
<a href="http://www.ftdichip.com/Support/Documents/DataSheets/ICs/DS_FT2232H.pdf">FT2232H</a>
configuration and things don’t work out, I just need to return the device
to this configuration.</p>

<p>It gets better.</p>

<p>Should you wish to build your own own design using the
<a href="http://www.ftdichip.com/Support/Documents/DataSheets/ICs/DS_FT2232H.pdf">FT2232H</a>
chip, the
<a href="https://www.arrow.com/en/products/max1000/arrow-development-tools">MAX1000</a>
<a href="https://www.trenz-electronic.de/fileadmin/docs/Trenz_Electronic/TEI0001/REV02/Documents/SCH-TEI0001-02-08-C8.PDF">schematic</a>
offers an example design, showing how to hook it up.  As a result, there’s no
need to ask for the proprietary portion of any
<a href="https://www.digilentinc.com">Digilent</a> schematic if you want an example.
It’s already published for the
<a href="https://www.arrow.com/en/products/max1000/arrow-development-tools">MAX1000</a>
as part of their <a href="https://www.trenz-electronic.de/fileadmin/docs/Trenz_Electronic/TEI0001/REV02/Documents/SCH-TEI0001-02-08-C8.PDF">schematic</a> (see page 5).</p>

<p>This is all kind of nice and rather neat, but we aren’t done yet.</p>

<p>The <a href="http://www.ftdichip.com/Support/Documents/DataSheets/ICs/DS_FT2232H.pdf">FT2232H FTDI
chip</a>
found on so many
<a href="https://en.wikipedia.org/wiki/Field-programmable_gate_array">FPGA</a>
boards offers more than just a USB to
<a href="https://en.wikipedia.org/wiki/Universal_asynchronous_receiver-transmitter">UART</a>
interface mode.  It also offers a USB to
“<a href="http://www.ftdichip.com/Support/Documents/DataSheets/ICs/DS_FT2232H.pdf">Fast Serial Interface</a>”
mode.  This is a simplex, bidirectional interface–with one direction of that
interface shown in Fig 5 below.</p>

<table align="center" style="float: none"><caption>Fig 8. Outgoing Fast Serial Data using the FT2232 chip</caption><tr><td><img src="/img/max1k/ftdi-fast-serial.png" alt="" width="780" /></td></tr></table>

<p>As you can see from the figure, this mode works much like a
<a href="https://en.wikipedia.org/wiki/Universal_asynchronous_receiver-transmitter">UART</a>,
with the exception of a clock that can run at up to 50MHz.  That means that
it should be possible to communicate to/from your board
at 5MBps (that’s mega-<em>BYTES</em> per second), rather than the maximum
<a href="https://en.wikipedia.org/wiki/Universal_asynchronous_receiver-transmitter">UART</a>
rate which is about 200kBps (2MBaud).
Even better, should you wish to play with this mode, the
<a href="http://www.ftdichip.com/Support/Documents/DataSheets/ICs/DS_FT2232H.pdf">FT2232 datasheet</a>
provides all the information you need: from pin assignments to configuration
and more.</p>

<p>Interested in a 25x speed increase anyone?</p>

<h2 id="conclusion">Conclusion</h2>

<p>I suppose at the end of any review I should offer a recommendation: should
someone buy this board or not?  To that question I would answer that it depends
upon the someone.</p>

<ul>
  <li>
    <p>If you are willing to do some soldering, and you aren’t afraid of
working without the best documentation then you might find this a nicely
built, well-designed
<a href="https://en.wikipedia.org/wiki/Field-programmable_gate_array">FPGA</a>
board to work with.</p>

    <p>It certainly offers more capabilities than the
<a href="https://store.digilentinc.com/cmod-s6-breadboardable-spartan-6-fpga-module">CMod S6</a>,
at a much lower price point, although you will need to do some soldering
if you want to connect the
<a href="https://www.arrow.com/en/products/max1000/arrow-development-tools">MAX1000</a>
to a breadboard.</p>
  </li>
  <li>
    <p>In a similar fashion, if you want to do some experimentation with the
<a href="http://www.ftdichip.com/Support/Documents/DataSheets/ICs/DS_FT2232H.pdf">FT2232</a>
interface found on many
<a href="https://en.wikipedia.org/wiki/Field-programmable_gate_array">FPGA</a>
boards, the documentation and
<a href="http://www.clifford.at/libxsvf">libxvsf</a>
should give you a clear enough starting point.</p>
  </li>
  <li>
    <p>On the other hand, if you’ve never done any
<a href="https://en.wikipedia.org/wiki/Field-programmable_gate_array">FPGA</a>
design before and just want a beginner’s board, this probably isn’t (yet)
the board you want to start out with.</p>
  </li>
</ul>

<p>As for me, finding an open source
<a href="http://www.ftdichip.com/Support/Documents/DataSheets/ICs/DS_FT2232H.pdf">FT2232</a>
interface and
<a href="https://www.trenz-electronic.de/fileadmin/docs/Trenz_Electronic/TEI0001/REV02/Documents/SCH-TEI0001-02-08-C8.PDF">schematic</a>
makes it all worth while.  Indeed, I’m still drooling over the opportunity
to fire up and test that 5MBps fast serial I/O link.</p>

  </div>


<div class "verse">
<HR align="center;" width="25%">
<P><em>He that withholdeth corn, the people shall curse him: but blessing shall be upon the head of him that selleth it.  (Prov 11:26)</em>


</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">The ZipCPU by Gisselquist Technology</h2>
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <!-- <li></li> -->
          <li><a href="mailto:zipcpu@gmail.com">zipcpu@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="soc-medlist">
          
          <li>
            <a href="https://github.com/ZipCPU"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">ZipCPU</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/zipcpu"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">@zipcpu</span></a>

          </li>
          
          
          <li><A href="https://www.patreon.com/ZipCPU"><img src="/img/become_a_patron_button.png"></a></li>
          

        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>The ZipCPU blog, featuring how to discussions of FPGA and soft-core CPU design.  This site will be focused on Verilog solutions, using exclusively OpenSource IP products for FPGA design.  Particular focus areas include topics often left out of more mainstream FPGA design courses such as how to debug an FPGA design.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
