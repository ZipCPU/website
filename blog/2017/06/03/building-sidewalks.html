<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Campus Sidewalks and FPGA Design</title>
  <meta name="description" content="I once heard a fascinating answer to the question of where to place sidewalkson campus after building a new building: Wait a year first.  After a year ofusin...">

  <link rel="shortcut icon" type="image/x-icon" href="/img/GT.ico">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://zipcpu.com/blog/2017/06/03/building-sidewalks.html">
  <link rel="alternate" type="application/rss+xml" title="The ZipCPU by Gisselquist Technology" href="http://zipcpu.com/feed.xml">
</head>


  <body>

    <header class="site-header">
  <div id="banner">
  <a href="/about/"><picture>
    <img height=120 src="/img/fullgqtech.png" alt="Gisselquist Technology, LLC">
  </picture></A>
  </div>

  <div class="site-nav">
<ul>
<li><a HREF="/about/">About Us</a>
<li><a HREF="/projects.html">Some Projects</a>
<li><a HREF="/topics.html">Coming Topics</a>
</ul>
</div>


</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Campus Sidewalks and FPGA Design</h1>
    <p class="post-meta"><time datetime="2017-06-03T00:00:00-04:00" itemprop="datePublished">Jun 3, 2017</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>I once heard a fascinating answer to the question of where to place sidewalks
on campus after building a new building: Wait a year first.  After a year of
using the new building, the students and faculty will have created paths
to and from your new building.  These dirt paths then tell you where to
build your official sidewalks.</p>

<p>This has been my experience with the <a href="https://github.com/ZipCPU/wbscope/blob/master/rtl/wbscopc.v">compressed wishbone
scope</a> I built
years ago.</p>

<p>The <a href="https://github.com/ZipCPU/wbscope/blob/master/rtl/wbscopc.v">compressed 
scope</a>
wasn’t my first bus scope.  The <a href="https://github.com/ZipCPU/wbscope/blob/master/rtl/wbscope.v">first
scope</a> was more of
a traditional scope that captured every sample based upon a trigger.  It’s
designed to be a slave on a <a href="http://opencores.org/opencores,wishbone">wishbone
bus</a>, and so it fits nicely as a
component of a design.</p>

<p>With just a touch of logic, it wasn’t very hard to add a <a href="https://en.wikipedia.org/wiki/Run-length_encoding">run-length
compression</a>
feature to the front end of the <a href="https://github.com/ZipCPU/wbscope/blob/master/rtl/wbscope.v">traditional
scope</a>.
Although this worked okay, it didn’t handle the trigger properly.  I
ignored this problem, and used the compressed scope anyway.</p>

<p>I used it to debug a <a href="http://store.digilentinc.com/pmod-gps-gps-receiver/">GPS
interface</a>, looking
for where the PPS signal took place with respect to the UART NMEA stream.</p>

<p>I used it to debug a <a href="http://opencores.org/opencores,wishbone">wishbone bus</a>,
so I could skip the idle times or even times when the slave I was debugging
wasn’t selected.</p>

<p>More recently, I used it to debug the <a href="https://github.com/ZipCPU/wbi2c">I2C
portion</a> of an HDMI interface.</p>

<p>In all of these, the
<a href="https://github.com/ZipCPU/wbscope/blob/master/rtl/wbscopc.v">compressed scope</a>
proved its worth particularly for slow
interfaces where the scope would allow longer snapshots than could fit in block
memory.  Indeed, I’m not sure I could have debugged these interfaces without a
<a href="https://github.com/ZipCPU/wbscope/blob/master/rtl/wbscopc.v">compressed scope</a>.
But, now that I’ve done so, I’ve learned enough to go
back and add in some necessary features.</p>

<ul>
  <li>
    <p>The <a href="https://github.com/ZipCPU/wbscope/blob/master/rtl/wbscopc.v">scope</a>
needs to have a known trigger point.  Given the output stream,
and the holdoff you configured the scope with, you should be able to know
exactly where the trigger will be in that output stream.</p>
  </li>
  <li>
    <p>If nothing is changing, the
<a href="https://github.com/ZipCPU/wbscope/blob/master/rtl/wbscopc.v">scope</a>
should have a maximum run length, so that
it doesn’t lock up and give you no information.</p>
  </li>
  <li>
    <p>The last piece of memory within the
<a href="https://github.com/ZipCPU/wbscope/blob/master/rtl/wbscopc.v">scope</a>’s
buffer must be a data point, even if it was part of a run.  It cannot be
left as part of a run.  This is a necessary part of knowing exactly where,
within the buffer, the trigger took place.</p>
  </li>
  <li>
    <p>As with the
<a href="https://github.com/ZipCPU/wbscope/blob/master/rtl/wbscope.v">regular scope</a>,
the
<a href="https://github.com/ZipCPU/wbscope/blob/master/rtl/wbscopc.v">compressed scope</a>
should have the option for working off of both a data clock and a bus clock.</p>
  </li>
  <li>
    <p>Timing is important.  Working at high speed is valuable.  The debugger
(i.e. scope) must be able to keep up with your logic when your logic is at
high speed.  This means that all debug/scope logic should be broken up into
pieces small enough to run at the highest speed necessary.</p>
  </li>
</ul>

<p>Hence, I just laid my metaphorical sidewalks, and rebuilt the 
<a href="https://github.com/ZipCPU/wbscope/blob/master/rtl/wbscopc.v">compressed scope</a>
according to my needs–now that I knew what they were.</p>

<p>If you have a <a href="http://opencores.org/opencores,wishbone">wishbone bus</a> within
your design, then feel free to try it out and let me know how (or if) it works
for you.</p>

<p>If you don’t have a wishbone bus within your design, then <a href="/topics.html">stick
around</a> and we’ll discuss how to build one.</p>


  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">The ZipCPU by Gisselquist Technology</h2>
    
    <em>Then shalt thou understand righteousness, and judgment, and equity; yea, every good path. (Prov 2:8)</em>
    

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <!-- <li></li> -->
          <li><a href="mailto:zipcpu@gmail.com">zipcpu@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/ZipCPU"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">ZipCPU</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/zipcpu"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">zipcpu</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>The ZipCPU blog, featuring how to discussions of FPGA and CPU design. This site will be focused on Verilog solutions, using exclusively OpenSource IP products for FPGA design.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
