<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Most common Digilent FPGA support requests</title>
  <meta name="description" content="I’ve been watching the Digilent Forum’s, andI’ve now seen some very common requests for FPGA help that keep coming backover and over again.  I’ll separate th...">

  <link rel="shortcut icon" type="image/x-icon" href="/img/GT.ico">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://zipcpu.com/digilent/2017/05/18/most-common-digilent-support-requests.html">
  <link rel="alternate" type="application/rss+xml" title="The ZipCPU by Gisselquist Technology" href="http://zipcpu.com/feed.xml">
</head>


  <body>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-102570964-1', 'auto');
  ga('send', 'pageview');

</script>

    <header class="site-header">
  <div id="banner">
  <a href="/"><picture>
    <img height=120 id="site-logo" src="/img/fullgqtech.png" alt="Gisselquist Technology, LLC">
  </picture></A>
  </div>

  <div class="site-nav">
<ul>

<li><a HREF="/">Main/Blog</a>


<li><a HREF="/about/">About Us</a>


<li><a HREF="/fpga-hell.html">FPGA Hell</a>


<li><a HREF="/projects.html">Projects</a>


<li><a HREF="/topics.html">Site Index</a>

<li><a HREF="https://www.patreon.com/ZipCPU">Support this Blog</a>
</ul>
</div>


</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Most common Digilent FPGA support requests</h1>
    <p class="post-meta"><time datetime="2017-05-18T00:00:00-04:00" itemprop="datePublished">May 18, 2017</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>I’ve been watching the <a href="https://forum.digilentinc.com">Digilent Forum’s</a>, and
I’ve now seen some very common requests for FPGA help that keep coming back
over and over again.  I’ll separate these into three groups, and share them
here with you.  They are actual hardware problems, beginner problems, and
Vivado problems.</p>

<ul>
  <li>
    <p>Actual Hardware Problems</p>

    <ul>
      <li>
        <p>Device not found.
<a href="https://forum.digilentinc.com/topic/4095-cmod-a7-comms-problem/">[1]</a>
<a href="https://forum.digilentinc.com/topic/3564-problem-with-detecting-arty-on-linux/">[2]</a>
<a href="https://forum.digilentinc.com/topic/3749-programming-flash-cmod-a7/">[3]</a>
<a href="https://forum.digilentinc.com/topic/4468-no-valid-target-connected-to-the-server/">[4]</a>
<a href="https://forum.digilentinc.com/topic/4483-arty-no-hardware-target-is-open-message/">[5]</a></p>

        <p>User’s seem to have a problem getting their tools set up properly.  I
certainly did.  One particular problem is basically, “I just plugged in
my device and my computer doesn’t recognize it.”  This is commonly caused
by an invalid or incomplete tool-suite setup.  However, it can be caused
by a bad USB cable.  So, usually, if the device <em>was</em> working, it tends to
be instead a bad USB cable.  Strangely enough, bad USB cables a rather
common occurrence on the forums.</p>

        <p><strong>The solution</strong>: It depends on the problem</p>
      </li>
      <li>
        <p>Changing the I/O voltage standard
<a href="https://forum.digilentinc.com/topic/2264-out-voltage-levels-from-the-fpga-development-boards/">[1]</a>
<a href="https://forum.digilentinc.com/topic/2274-multiple-lvcmos-levels-on-zybo-pmod-ports/">[2]</a>
<a href="https://forum.digilentinc.com/topic/2514-zybo-board-18v-logic/">[3]</a>
<a href="https://forum.digilentinc.com/topic/4519-nexys-video-lvds-via-pmod-connector-possible/">[4]</a>
<a href="https://forum.digilentinc.com/topic/4545-required-18v-gpio-fpga-board-preferably-artix-7/">[5]</a></p>

        <p>This question usually starts out when someone notes that you have to
specify the I/O standard for each pin within the constraints file,
whether UCF or XDC.  A reasonable conclusion might be that this standard
can be simply changed on a pin for pin basis.</p>

        <p>When the Xilinx tool tells them there’s an error in their code, they write
in to Digilent asking how to fix it.</p>

        <p>What they often don’t realize is that all of the pins on a given I/O bank
have their voltage standards set in hardware–not by the constraints file.
In particular, each I/O bank needs to be passed a “power” wire, at the high
voltage level for the bank, which will then be used by the FPGA to connect
any of the pins on that bank to “high”.  Hence, to change from one standard
to another, you need to change this input voltage pin and in doing so
you will adjust the voltage of everything on the bank.</p>

        <p>If you know what you are doing, it is <em>possible</em> to rewire a board to change
an already wired pin on that board.  I say <em>possible</em>.  I’ve never done it,
but I’ve seen things like this done by those who are greater than I.
My answer, therefore, would be that it’s <em>possible</em>, but <em>not recommended.</em>
Further, it’s not a “feature” that Digilent supports, and it is likely to
void any warrantee you might have on your board.</p>

        <p>If you are dealing with an input wire, and an input wire <em>only</em>, it is also</p>

        <p><strong>The solution</strong>: It really requires either a level shifting peripheral,
such as the <a href="http://store.digilentinc.com/pmod-lvlshift-logic-level-shifter">PMod level
shifter</a>
to swap voltage standards, or a new board design.  The good news is that
neither of these approaches will void your warrantee.</p>
      </li>
      <li>
        <p>There’s the FTDI request. 
<a href="https://forum.digilentinc.com/topic/3658-digilent-nexys-video-ft2232-eeprom/">[1]</a>
<a href="https://forum.digilentinc.com/topic/1054-jtag-hs2-firmware-erased-by-accident/">[2]</a></p>

        <p>Many individuals have tried, either by accident or on purpose, reflashing
the FTDI interface chip on their board and, as a result, have broken their
board so badly that it no longer responds to configuration commands.  The
solution to this problem is that the Digilent staff will send this user a
private message with the correct software to reload onto their device.</p>

        <p>The strange part of this request is that [I am aware of one user who
has successfully reprogrammed the FT2232 chip on his board, and
achieved much higher data throughput as a result.</p>

        <p><strong>The solution</strong>: The Digilent staff provides a private message containing
instructions and/or data to fix this problem.</p>

        <p><a href="https://github.com/richardeoin/ftx-prog">See here</a> for an example.  The
D2XX drivers are necessary.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Beginner problems</p>

    <ul>
      <li>
        <p>I need to build (some instructor’s problem statement).  Please help me.
<a href="https://forum.digilentinc.com/topic/4110-ise-design-suite/">[1]</a>
<a href="https://forum.digilentinc.com/topic/4104-basys-3/">[2]</a>
<a href="https://forum.digilentinc.com/topic/4200-not-understanding-lcd-display/">[3]</a>
<a href="https://forum.digilentinc.com/topic/4281-the-code-for-sk6812-mini-led/">[4]</a></p>

        <p>This request gets the least help from members on the forum.  The response
is usually a kind pointer to where the user documentation is at and
nothing more.</p>

        <p><strong>The solution</strong>:  The student needs to do his own homework.</p>
      </li>
      <li>
        <p>Help me, my design doesn’t work.
<a href="https://forum.digilentinc.com/topic/3991-usb-keyboard-on-basys3/">[1]</a>
<a href="https://forum.digilentinc.com/topic/3731-nexys-4-to-pc-uart-communication/">[2]</a>
<a href="https://forum.digilentinc.com/topic/3706-not-receiving-packets-in-echo-server-example-in-nexys-4-ddr-getting-started-with-microblaze-servers/">[3]</a>
<a href="https://forum.digilentinc.com/topic/3666-artix-nexys-4-and-keyboard/">[4]</a>
<a href="https://forum.digilentinc.com/topic/3675-arty-display-uart-data-on-leds/">[5]</a>
<a href="https://forum.digilentinc.com/topic/4200-not-understanding-lcd-display/">[6]</a>
<a href="https://forum.digilentinc.com/topic/4208-nexys_video_vivado2014_pmodda4/">[7]</a>
<a href="https://forum.digilentinc.com/topic/4487-receive-256-bits-data-from-ps-via-axi-lite-slave">[8]</a></p>

        <p>I’ll come back to this in a moment, but many students think that
an experienced engineer can just deskcheck their work and find the bug.
While I enjoy the challenge, and while I can often do this, it
certainly wasn’t how I became an <em>experienced</em> engineer when working
with FPGAs.  I got there through simulation to make sure my logic
worked, and using a scope (or scopes) to make sure my simulation
matched the device.</p>

        <p><strong>The solution</strong>: The solution is to simulate the design together with a
simulated peripheral.  This is often how I find bugs in students serial
port designs, for example.  I’ll connect their design to a <a href="https://github.com/ZipCPU/wbuart32/blob/master/bench/cpp/uartsim.cpp">serial port
simulator</a>,
create a <a href="https://en.wikipedia.org/wiki/Value_change_dump">.vcd file</a> for
viewing in <a href="http://gtkwave.sourceforge.net">gtkwave</a>, and write back about
what I found.  There’s no reason why the student couldn’t have done this.</p>

        <p>Perhaps I’ll post these results for the next student I help?</p>
      </li>
      <li>
        <p>Asynchronous Reset
<a href="https://forum.digilentinc.com/topic/3702-pc-to-basys3-via-uart-not-working-correctly/">[1]</a>
<a href="https://forum.digilentinc.com/topic/4208-nexys_video_vivado2014_pmodda4/">[2]</a></p>

        <p>While Xilinx devices support an asynchronous reset to the logic, it’s so
unreliable that <a href="https://forums.xilinx.com/t5/PLD-Blog/That-Dangerous-Asynchronous-Reset/ba-p/12856">they recommend users not use it</a>.  This is usually a
student’s first project on an actual FPGA, and a beginner’s mistake.</p>

        <p><strong>The solution</strong>: Get rid of the <em>negedge</em> <em>reset</em> from any always block
dependencies.  Replace these with a combination of <em>initial</em> statements and
(if necessary) synchronous resets.</p>
      </li>
      <li>
        <p>The logic Clock
<a href="https://forum.digilentinc.com/topic/681-creating-a-25-mhz-clock-on-the-basys-3/">[1]</a>
<a href="https://forum.digilentinc.com/topic/4208-nexys_video_vivado2014_pmodda4/">[2]</a></p>

        <p>Many new FPGA users aren’t quite aware the clocks are special things.
They then create logic wires internal to their design which they wish
to use to divide this clock rate.  While not a problem, such logic
wires don’t have the reliability of a clock, and transitioning on their
edges doesn’t produce the result you will want.  Where the problem comes
into play is when the student wants their logic to transition on the
positive (or worse negative) edge of this clock.</p>

        <p><strong>The solution</strong>: <a href="https://www.quora.com/What-is-the-function-of-a-strobe-function-in-digital-system">a logic strobe</a>.</p>

        <p>This solution finds a lot of application in 1. beginning FPGA student
designs, and then again in 2. signal processing designs, where the
device’s clock speed is not synchronized to the FPGA’s clock, and hence
the data comes in from the sensor at a slower speed than the devices
clock speed.</p>
      </li>
      <li>
        <p>The student who hasn’t simulated their design
<a href="https://forum.digilentinc.com/topic/4208-nexys_video_vivado2014_pmodda4/">[1]</a>
<a href="https://forum.digilentinc.com/topic/4487-receive-256-bits-data-from-ps-via-axi-lite-slave">[2]</a></p>

        <p>In this case, someone new to FPGA design has created some design and it
doesn’t work.  They don’t know why.  This one is similar to the Vivado
library component problem: they have no idea what’s going on internal
to the FPGA to answer the “why won’t my program work” question.</p>

        <p>The solution they want to this problem is not the industry solution.
What these students want is for some kind soul on the forum to look at
their code and tell them what they are doing wrong.</p>

        <p><strong>The industry solution</strong> to this problem is to simulate the code and any
peripherals it might be working with, and then as part of that to verify
that the logic works as intended.</p>
      </li>
      <li>
        <p>They don’t know how to simulate their problem
<a href="https://forum.digilentinc.com/topic/3992-something-simple-is-apparently-impossible-incrdec-number/">[1]</a></p>

        <p>Sometimes the user is trying to work with a piece of hardware they’ve
never worked with before.  As a result, they have no simulation for this
hardware because they just aren’t all that familiar with how it works.
(A user button is a good example of this, since bouncing isn’t something
most people place into simulators.) In this case, their design doesn’t work
on the real hardware and, again, they don’t know why.</p>

        <p><strong>The solution</strong> to this problem is twofold.  First, build a simulator that
encapsulates your understaning of the hardware from the diagrams and
specifications you have.  Second, when that first part fails, use some
form of a  scope to measure what is actually going on across the wires
to/from the hardware.</p>
      </li>
      <li>
        <p>Crossing clock domains
<a href="https://forum.digilentinc.com/topic/4286-implementation-spi-basys3/">[1]</a></p>

        <p>Few students have ever heard of <a href="https://en.wikipedia.org/wiki/Metastability_in_electronics">metastability
problems</a>.  As
a result, they write code that crosses clock domains realizing that there
might be a problem associated with doing so.</p>

        <p><strong>The solution</strong>: The simple solution is to clock every input at the new
clock twice before using it.  This works for some things, though not all.
A more complete discussion of how to deal with crossing from one clock
can be found in <a href="http://www.sunburst-design.com/papers/CummingsSNUG2008Boston_CDC.pdf">this
article</a>.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Vivado problems</p>

    <ul>
      <li>
        <p>The demo doesn’t build
<a href="https://forum.digilentinc.com/topic/4090-error-with-pmod-oledrgb-demo/">[1]</a>
<a href="https://forum.digilentinc.com/topic/4270-zybo-demo-projects-in-vivado-20171/">[2]</a>
<a href="https://forum.digilentinc.com/topic/4602-zybo-echo-server-not-working/">[3]</a>
<a href="https://forum.digilentinc.com/topic/4599-locked-ips-place_design-error-in-vivado-with-zybo-dma-audio-demo/">[4]</a></p>

        <p>Typically this is caused by the user trying to build the demo design
using one version of Vivado, while the demo was instead built with
another version of Vivado.</p>

        <p><strong>The solution</strong>: The Digilent staff share what version of Vivado was used
to build the demo.  Sometimes the demo has gotten old, and the Digilent
staff need to update it.</p>
      </li>
      <li>
        <p>They’ve integrated some component from the Vivado library into their design
and “it’s not working”
<a href="https://forum.digilentinc.com/topic/4011-how-to-easily-implement-a-basic-low-pass-filter-using-fir-compiler-on-nexys-4-ddr/">[1]</a>
<a href="https://forum.digilentinc.com/topic/3735-dds-compiler-60-ip-core-for-audible-sinewave/">[2]</a></p>

        <p>Of all the times I’ve seen this problem, it has yet to be that the
Xilinx provided IP component doesn’t work.  It’s more often that the
user isn’t feeding the component properly, or using the results from
the component properly.  Making the problem worse, rarely has the user
taken the time to instrument what is going on, so they have no clue
where their problem lies.</p>

        <p><strong>The solution</strong>: a good internal scope, such as the
<a href="https://github.com/ZipCPU/wbscope">wishbone scope</a> or the <a href="https://github.com/ZipCPU/wbscope/blob/master/rtl/axi4lscope.v">AXI-Lite
scope</a></p>
      </li>
      <li>
        <p>The user can’t figure out how to add custom IP to the Vivado flow
<a href="https://forum.digilentinc.com/topic/3961-how-to-add-own-logic-to-arty-board-flow/">[1]</a>
<a href="https://forum.digilentinc.com/topic/4597-create-an-ip-that-can-partly-be-controlled-with-vivado-sdk-and-partly-be-controlled-by-a-physical-switch/">[2]</a></p>

        <p><strong>The solution</strong>: Well, I might be biased here, but … my solution to
this problem has been not to use the broken Vivado design flow.
I’m sure I’ll discuss more of my problems with there processing flow
as time goes on.</p>

        <p>One of the pleasant things about the <a href="https://forum.digilentinc.com">Digilent
forums</a> is that these common requests
are dealt with in a friendly manner–even though I’m certain someone
must be rolling their eyes at seeing the same request <em>again</em>.</p>
      </li>
    </ul>
  </li>
</ul>

<p>I think I’ll come back to this over time, adding references to this this post
of Digilent Forum posts that illustrate my points here.</p>

  </div>


<div class "verse">
<HR align="center;" width="25%">
<P><em>Let us hear the conclusion of the whole matter: Fear God, and keep his commandments: for this is the whole duty of man. (Eccl 12:13)</em>


</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">The ZipCPU by Gisselquist Technology</h2>
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <!-- <li></li> -->
          <li><a href="mailto:zipcpu@gmail.com">zipcpu@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/ZipCPU"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">ZipCPU</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/zipcpu"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">zipcpu</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>The ZipCPU blog, featuring how to discussions of FPGA and soft-core CPU design.  This site will be focused on Verilog solutions, using exclusively OpenSource IP products for FPGA design.  Particular focus areas include topics often left out of more mainstreeam FPGA design courses such as how to debug an FPGA design.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
